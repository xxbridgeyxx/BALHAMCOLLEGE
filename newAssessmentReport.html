<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>All Employees</title>
    <script
            src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
            crossorigin="anonymous">
    </script>
    <script>
        $(document).ready(function(){
            $.ajax({
                type: 'Get',
                dataType: 'JSON',
                url: 'https://balham-college-db.herokuapp.com/api/Assessment/',
                success: function (data) {
                    // location.reload();
                    // var departmentname;
                    i = 0;
                    while (i < data.length){

                        assessment = data[i];
                        var CourseID = assessment.course;
                        coursename = getCourseName(CourseID);
                        console.log(coursename);
                        $("#assessment_report").append("<hr>" +
                            "<br>Assessment ID: " + assessment.AssessmentID +
                            "<br>Assessment Number: " + assessment.AssessmentNumber +
                            "<br>Assessment Name: " + assessment.AssessmentName +
                            "<br>Assessment Type: " + assessment.Type +
                            "<br>Weighting: " + assessment.Weighting+
                            "<br>Maximum Mark: " + assessment.MaximumMark+
                            "<br>CourseID: " + assessment.CourseID);
                        i = i + 1;
                    }
                },
                error: function (err) {
                    console.log(err);
                }
            });
        });



        function getCourseName(CourseID) {
            coursename = "";
            $.ajax({
                type: 'Get',
                dataType: 'JSON',
                async: false,
                url: 'https://balham-college-db.herokuapp.com/api/Result/'+CourseID+'/',
                success: function (data) {
                    // location.reload();
                    coursename = data.name;


                },
                error: function (err) {
                    console.log(err);
                }
            });
            return coursename;
        }

        function getStudentName(EnrolmentID) {
            enrolementname = "";
            $.ajax({
                type: 'Get',
                dataType: 'JSON',
                async: false,
                url: 'https://balham-college-db.herokuapp.com/api/Result/'+EnrolmentID+'/',
                success: function (data) {
                    // location.reload();
                    enrolementname = data.name;


                },
                error: function (err) {
                    console.log(err);
                }
            });
            return enrolementname;
        }
    </script>
</head>
<body>
<div id = "assessment_report">
</div>
</body>
</html>

